---
import Layout from '../../../../layouts/Layout.astro';
import Header from '../../../../components/Header.astro';
import Heading from '../../../../components/Heading.astro';

// In a real application, this data would come from a database or content collection
// For this example, we'll include the data directly in the page
const lessonData = {
  "band": {
    "beginning-band-first-notes": {
      title: "Beginning Band: First Notes",
      description: "Video description and more context regarding the video. Eu ut mollit nostrud quis sunt adipisicing adipisicing velit Lorem. Excepteur culpa eiusmod commodo cupidatat excepteur aute minim nulla. Ut cupidatat dolore laboris aute non id. Tempor nostrud eu dolore magna sunt id duis esse aute voluptate voluptate aliqua anim commodo mollit. Elit minim id nisi labore. Aute cupidatat cillum exercitation nulla do.",
      downloadUrl: "#",
      imageUrl: "/images/lessons/placeholder-large.jpg"
    },
    "ensemble-skills": {
      title: "Ensemble Skills for Beginners",
      description: "Video description and more context regarding the video. Eu ut mollit nostrud quis sunt adipisicing adipisicing velit Lorem. Excepteur culpa eiusmod commodo cupidatat excepteur aute minim nulla. Ut cupidatat dolore laboris aute non id. Tempor nostrud eu dolore magna sunt id duis esse aute voluptate voluptate aliqua anim commodo mollit. Elit minim id nisi labore. Aute cupidatat cillum exercitation nulla do.",
      downloadUrl: "#",
      imageUrl: "/images/lessons/placeholder-large.jpg"
    }
  },
  "fundamentals": {
    "rhythm-basics": {
      title: "Rhythm Basics: Quarter & Eighth Notes",
      description: "Video description and more context regarding the video. Eu ut mollit nostrud quis sunt adipisicing adipisicing velit Lorem. Excepteur culpa eiusmod commodo cupidatat excepteur aute minim nulla. Ut cupidatat dolore laboris aute non id. Tempor nostrud eu dolore magna sunt id duis esse aute voluptate voluptate aliqua anim commodo mollit. Elit minim id nisi labore. Aute cupidatat cillum exercitation nulla do.",
      downloadUrl: "#",
      imageUrl: "/images/lessons/placeholder-large.jpg"
    },
    "music-literacy": {
      title: "Music Literacy: Reading Notation",
      description: "Video description and more context regarding the video. Eu ut mollit nostrud quis sunt adipisicing adipisicing velit Lorem. Excepteur culpa eiusmod commodo cupidatat excepteur aute minim nulla. Ut cupidatat dolore laboris aute non id. Tempor nostrud eu dolore magna sunt id duis esse aute voluptate voluptate aliqua anim commodo mollit. Elit minim id nisi labore. Aute cupidatat cillum exercitation nulla do.",
      downloadUrl: "#",
      imageUrl: "/images/lessons/placeholder-large.jpg"
    }
  },
  "resources": {
    "instrument-care": {
      title: "Instrument Care & Maintenance",
      description: "Video description and more context regarding the video. Eu ut mollit nostrud quis sunt adipisicing adipisicing velit Lorem. Excepteur culpa eiusmod commodo cupidatat excepteur aute minim nulla. Ut cupidatat dolore laboris aute non id. Tempor nostrud eu dolore magna sunt id duis esse aute voluptate voluptate aliqua anim commodo mollit. Elit minim id nisi labore. Aute cupidatat cillum exercitation nulla do.",
      downloadUrl: "#",
      imageUrl: "/images/lessons/placeholder-large.jpg"
    },
    "practice-strategies": {
      title: "Practice Strategies for Students",
      description: "Video description and more context regarding the video. Eu ut mollit nostrud quis sunt adipisicing adipisicing velit Lorem. Excepteur culpa eiusmod commodo cupidatat excepteur aute minim nulla. Ut cupidatat dolore laboris aute non id. Tempor nostrud eu dolore magna sunt id duis esse aute voluptate voluptate aliqua anim commodo mollit. Elit minim id nisi labore. Aute cupidatat cillum exercitation nulla do.",
      downloadUrl: "#",
      imageUrl: "/images/lessons/placeholder-large.jpg"
    }
  }
};

// This function is required for static generation of dynamic routes
export function getStaticPaths() {
  const paths = [];
  
  // Generate paths for all lessons in all categories
  Object.entries(lessonData).forEach(([category, lessons]) => {
    Object.keys(lessons).forEach((id) => {
      paths.push({
        params: { category, id }
      });
    });
  });
  
  return paths;
}

// Get the category and id from the URL
const { category, id } = Astro.params;

// Get the specific lesson data
const lesson = lessonData[category]?.[id];

// If lesson doesn't exist, we could handle a 404 here
// For this example, we'll just use placeholder data if not found
const lessonTitle = lesson?.title || "Lesson Not Found";
const lessonImage = lesson?.imageUrl || "/images/lessons/placeholder-large.jpg";
const lessonDescription = lesson?.description || "This lesson could not be found.";
const downloadUrl = lesson?.downloadUrl || "#";
---

<Layout title={`${lessonTitle} | Music Education | Kaitlin Isaac`}>
  <Header />
  <main id="main" class="max-w-2xl mx-auto px-6 md:px-8 py-8 space-y-8">
    <!-- Back link -->
    <a href="/music-education/lessons" class="inline-flex items-center gap-2 text-primary hover:underline">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
      </svg>
      Back to all lessons
    </a>
    
    <!-- Lesson Title -->
    <Heading level={1} class="mt-6">
      {lessonTitle}
    </Heading>
    
    <!-- Lesson Image -->
    <div class="w-full aspect-video bg-gray-200 flex items-center justify-center text-gray-500">
      [screenshots of lesson]
    </div>
    
    <!-- Lesson Description -->
    <div class="prose max-w-none">
      <p>{lessonDescription}</p>
    </div>
    
    <!-- Download Button -->
    <div class="mt-8">
      <a 
        href={downloadUrl} 
        class="inline-flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-full hover:bg-primary-dark transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
        </svg>
        download lesson
      </a>
    </div>
  </main>
</Layout> 